<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Purchase History - Tyazubwenge Management</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" />
</head>
<body class="dashboard dashboard_1">
    <div class="full_container">
        <div class="inner_container">
            <!-- Sidebar -->
            <nav id="sidebar">
                <div class="sidebar_blog_1">
                    <div class="sidebar-header">
                        <div class="logo_section">
                            <a href="index.html"><img class="logo_icon img-responsive" src="images/logo/logo_icon.png" alt="#" /></a>
                        </div>
                    </div>
                    <div class="sidebar_user_info">
                        <div class="icon_setting"></div>
                        <div class="user_profle_side">
                            <div class="user_img"><img class="img-responsive" src="images/layout_img/user_img.jpg" alt="#" /></div>
                            <div class="user_info">
                                <h6>John David</h6>
                                <p><span class="online_animation"></span> Online</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sidebar_blog_2">
                    <h4>Laboratory Management</h4>
                    <ul class="list-unstyled components">
                        <li><a href="dashboard.html"><i class="fa fa-dashboard yellow_color"></i> <span>Dashboard</span></a></li>
                        <li><a href="stock-inventory.html"><i class="fa fa-warehouse blue1_color"></i> <span>Stock & Inventory</span></a></li>
                        <li><a href="sales-pos.html"><i class="fa fa-shopping-cart green_color"></i> <span>Sales & Billing</span></a></li>
                        <li class="active">
                            <a href="#customers" data-toggle="collapse" aria-expanded="true" class="dropdown-toggle"><i class="fa fa-users purple_color"></i> <span>Customer Management</span></a>
                            <ul class="collapse list-unstyled show" id="customers">
                                <li><a href="customers-list.html">> <span>Customer Database</span></a></li>
                                <li><a href="customers-loyalty.html">> <span>Loyalty Program</span></a></li>
                                <li><a href="customers-credit.html">> <span>Credit Management</span></a></li>
                                <li class="active"><a href="customers-history.html">> <span>Purchase History</span></a></li>
                            </ul>
                        </li>
                        <li><a href="suppliers-list.html"><i class="fa fa-truck orange_color"></i> <span>Supplier Management</span></a></li>
                        <li><a href="reports-sales.html"><i class="fa fa-chart-line red_color"></i> <span>Reports & Analytics</span></a></li>
                        <li><a href="settings.html"><i class="fa fa-cog purple_color"></i> <span>System Settings</span></a></li>
                    </ul>
                </div>
            </nav>
            <!-- end sidebar -->
            <!-- right content -->
            <div id="content">
                <!-- topbar -->
                <div class="topbar">
                    <nav class="navbar navbar-expand-lg navbar-light">
                        <div class="full">
                            <button type="button" id="sidebarCollapse" class="sidebar_toggle"><i class="fa fa-bars"></i></button>
                            <div class="logo_section">
                                <a href="index.html"><img class="img-responsive" src="images/logo/logo.png" alt="#" /></a>
                            </div>
                            <div class="right_topbar">
                                <div class="icon_info">
                                    <ul>
                                        <li><a href="#"><i class="fa fa-bell-o"></i><span class="badge">2</span></a></li>
                                        <li><a href="#"><i class="fa fa-question-circle"></i></a></li>
                                        <li><a href="#"><i class="fa fa-envelope-o"></i><span class="badge">3</span></a></li>
                                    </ul>
                                    <ul class="user_profile_dd">
                                        <li>
                                            <a class="dropdown-toggle" data-toggle="dropdown"><img class="img-responsive rounded-circle" src="images/layout_img/user_img.jpg" alt="#" /><span class="name_user">John David</span></a>
                                            <div class="dropdown-menu">
                                                <a class="dropdown-item" href="profile.html">My Profile</a>
                                                <a class="dropdown-item" href="settings.html">Settings</a>
                                                <a class="dropdown-item" href="#"><span>Log Out</span> <i class="fa fa-sign-out"></i></a>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </nav>
                </div>
                <!-- end topbar -->
                <!-- dashboard inner -->
                <div class="midde_cont">
                    <div class="container-fluid">
                        <div class="row column_title">
                            <div class="col-md-12">
                                <div class="page_title">
                                    <h2>Customer Purchase History</h2>
                                </div>
                            </div>
                        </div>
                        <div class="row column1">
                            <div class="col-md-12">
                                <div class="white_shd full margin_bottom_30">
                                    <div class="full graph_head">
                                        <div class="heading1 margin_0">
                                            <h2>Customer Search & Filter</h2>
                                        </div>
                                        <div class="heading1 margin_0">
                                            <div class="input-group">
                                                <input type="text" class="form-control" placeholder="Search customer..." id="customerSearch">
                                                <div class="input-group-append">
                                                    <button class="btn btn-primary" onclick="searchCustomer()">
                                                        <i class="fa fa-search"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="full graph_revenue">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="content">
                                                    <div class="customer_search_results">
                                                        <div class="customer_card" onclick="selectCustomer('CUST-001')">
                                                            <div class="customer_info">
                                                                <h5>Dr. Sarah Johnson - University Lab</h5>
                                                                <p>Total Purchases: ₦2,847,500 | Last Purchase: 2024-01-15</p>
                                                                <span class="badge badge-warning">Gold Member</span>
                                                            </div>
                                                        </div>
                                                        <div class="customer_card" onclick="selectCustomer('CUST-002')">
                                                            <div class="customer_info">
                                                                <h5>Research Institute</h5>
                                                                <p>Total Purchases: ₦1,250,000 | Last Purchase: 2024-01-15</p>
                                                                <span class="badge badge-secondary">Silver Member</span>
                                                            </div>
                                                        </div>
                                                        <div class="customer_card" onclick="selectCustomer('CUST-003')">
                                                            <div class="customer_info">
                                                                <h5>Medical Center</h5>
                                                                <p>Total Purchases: ₦1,890,000 | Last Purchase: 2024-01-14</p>
                                                                <span class="badge badge-secondary">Silver Member</span>
                                                            </div>
                                                        </div>
                                                        <div class="customer_card" onclick="selectCustomer('CUST-004')">
                                                            <div class="customer_info">
                                                                <h5>Industrial Lab</h5>
                                                                <p>Total Purchases: ₦750,000 | Last Purchase: 2024-01-10</p>
                                                                <span class="badge badge-primary">Bronze Member</span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row column1" id="purchaseHistory" style="display: none;">
                            <div class="col-md-12">
                                <div class="white_shd full margin_bottom_30">
                                    <div class="full graph_head">
                                        <div class="heading1 margin_0">
                                            <h2 id="selectedCustomerName">Purchase History</h2>
                                        </div>
                                        <div class="heading1 margin_0">
                                            <div class="btn-group" role="group">
                                                <button type="button" class="btn btn-outline-primary active" onclick="filterHistory('all')">All</button>
                                                <button type="button" class="btn btn-outline-success" onclick="filterHistory('this_month')">This Month</button>
                                                <button type="button" class="btn btn-outline-info" onclick="filterHistory('last_3_months')">Last 3 Months</button>
                                                <button type="button" class="btn btn-outline-warning" onclick="filterHistory('last_year')">Last Year</button>
                                            </div>
                                            <button class="btn btn-primary ml-2" onclick="exportHistory()">
                                                <i class="fa fa-download"></i> Export
                                            </button>
                                        </div>
                                    </div>
                                    <div class="table_section padding_infor_info">
                                        <div class="table-responsive-sm">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                        <th>Date</th>
                                                        <th>Invoice No.</th>
                                                        <th>Product</th>
                                                        <th>Quantity</th>
                                                        <th>Unit Price</th>
                                                        <th>Total</th>
                                                        <th>Payment Method</th>
                                                        <th>Status</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="historyTableBody">
                                                    <!-- Dynamic content will be loaded here -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row column1">
                            <div class="col-md-6">
                                <div class="white_shd full margin_bottom_30">
                                    <div class="full graph_head">
                                        <div class="heading1 margin_0">
                                            <h2>Purchase Statistics</h2>
                                        </div>
                                    </div>
                                    <div class="full graph_revenue">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="content">
                                                    <div class="purchase_stats">
                                                        <div class="stat_item">
                                                            <h4>₦6,737,500</h4>
                                                            <p>Total Customer Purchases</p>
                                                            <span class="badge badge-info">All Time</span>
                                                        </div>
                                                        <div class="stat_item">
                                                            <h4>₦2,847,500</h4>
                                                            <p>Top Customer Value</p>
                                                            <span class="badge badge-warning">Dr. Sarah Johnson</span>
                                                        </div>
                                                        <div class="stat_item">
                                                            <h4>₦1,687,500</h4>
                                                            <p>Average per Customer</p>
                                                            <span class="badge badge-success">Good</span>
                                                        </div>
                                                        <div class="stat_item">
                                                            <h4>156</h4>
                                                            <p>Total Transactions</p>
                                                            <span class="badge badge-primary">This Month</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="white_shd full margin_bottom_30">
                                    <div class="full graph_head">
                                        <div class="heading1 margin_0">
                                            <h2>Top Products by Sales</h2>
                                        </div>
                                    </div>
                                    <div class="full graph_revenue">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="content">
                                                    <div class="top_products">
                                                        <div class="product_item">
                                                            <h6>Analytical Balance (2.5kg)</h6>
                                                            <p>₦1,200,000 sold</p>
                                                            <div class="progress">
                                                                <div class="progress-bar" style="width: 85%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="product_item">
                                                            <h6>Digital Microscope (1000x)</h6>
                                                            <p>₦980,000 sold</p>
                                                            <div class="progress">
                                                                <div class="progress-bar" style="width: 70%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="product_item">
                                                            <h6>Sodium Chloride (Pure Grade)</h6>
                                                            <p>₦750,000 sold</p>
                                                            <div class="progress">
                                                                <div class="progress-bar" style="width: 55%"></div>
                                                            </div>
                                                        </div>
                                                        <div class="product_item">
                                                            <h6>Safety Equipment Set</h6>
                                                            <p>₦450,000 sold</p>
                                                            <div class="progress">
                                                                <div class="progress-bar" style="width: 35%"></div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/custom.js"></script>
    <script>
        const customerData = {
            'CUST-001': {
                name: 'Dr. Sarah Johnson - University Lab',
                purchases: [
                    { date: '2024-01-15', invoice: 'INV-2024-001', product: 'Analytical Balance (2.5kg)', qty: '1', unitPrice: '₦185,000', total: '₦185,000', payment: 'Bank Transfer', status: 'Paid' },
                    { date: '2024-01-10', invoice: 'INV-2024-008', product: 'Sodium Chloride (500g)', qty: '10 kg', unitPrice: '₦2,500', total: '₦25,000', payment: 'Bank Transfer', status: 'Paid' },
                    { date: '2024-01-05', invoice: 'INV-2024-012', product: 'Safety Goggles (UV Protection)', qty: '5 pieces', unitPrice: '₦3,500', total: '₦17,500', payment: 'Bank Transfer', status: 'Paid' }
                ]
            },
            'CUST-002': {
                name: 'Research Institute',
                purchases: [
                    { date: '2024-01-15', invoice: 'INV-2024-002', product: 'Sodium Chloride (500g)', qty: '5 kg', unitPrice: '₦2,500', total: '₦12,500', payment: 'Cash', status: 'Paid' },
                    { date: '2024-01-12', invoice: 'INV-2024-009', product: 'Hydrochloric Acid (37%)', qty: '2 L', unitPrice: '₦8,500', total: '₦17,000', payment: 'Bank Transfer', status: 'Paid' }
                ]
            }
        };

        function searchCustomer() {
            const searchTerm = document.getElementById('customerSearch').value.toLowerCase();
            const customerCards = document.querySelectorAll('.customer_card');
            
            customerCards.forEach(card => {
                const customerName = card.querySelector('h5').textContent.toLowerCase();
                if (customerName.includes(searchTerm)) {
                    card.style.display = '';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function selectCustomer(customerId) {
            const customer = customerData[customerId];
            if (customer) {
                document.getElementById('selectedCustomerName').textContent = customer.name + ' - Purchase History';
                document.getElementById('purchaseHistory').style.display = '';
                
                const tbody = document.getElementById('historyTableBody');
                tbody.innerHTML = '';
                
                customer.purchases.forEach(purchase => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${purchase.date}</td>
                        <td>${purchase.invoice}</td>
                        <td>${purchase.product}</td>
                        <td>${purchase.qty}</td>
                        <td>${purchase.unitPrice}</td>
                        <td>${purchase.total}</td>
                        <td>${purchase.payment}</td>
                        <td><span class="badge badge-success">${purchase.status}</span></td>
                        <td>
                            <button class="btn btn-sm btn-info" onclick="viewInvoice('${purchase.invoice}')">
                                <i class="fa fa-eye"></i>
                            </button>
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            }
        }

        function filterHistory(type) {
            // Remove active class from all buttons
            document.querySelectorAll('.btn-group button').forEach(btn => btn.classList.remove('active'));
            // Add active class to clicked button
            event.target.classList.add('active');
            
            // Filter logic would go here
            alert('Filtering by: ' + type);
        }

        function exportHistory() {
            alert('Exporting purchase history...');
        }

        function viewInvoice(invoiceNo) {
            alert('Viewing invoice: ' + invoiceNo);
        }
    </script>
    <style>
        .customer_search_results {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .customer_card {
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .customer_card:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }
        
        .customer_card h5 {
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .customer_card p {
            color: #666;
            margin: 5px 0;
        }
        
        .purchase_stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .stat_item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }
        
        .stat_item h4 {
            color: #28a745;
            font-size: 1.3em;
            margin-bottom: 5px;
        }
        
        .stat_item p {
            color: #666;
            margin: 5px 0;
        }
        
        .top_products {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .product_item {
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .product_item h6 {
            color: #333;
            margin-bottom: 5px;
        }
        
        .product_item p {
            color: #666;
            margin: 5px 0;
            font-size: 0.9em;
        }
    </style>
</body>
</html>
